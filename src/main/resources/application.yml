server:
  port: 3000

spring:
  management:
    endpoints:
      web:
        exposure:
          include=*:
  application:
    name: Uqar
  datasource:
    url: jdbc:postgresql://localhost:5432/uqar
    username: postgres
    password: password
    driver-class-name: org.postgresql.Driver
    name: uqar
    hikari:
      # Connection pool settings for Docker/network resilience
      minimum-idle: 2
      maximum-pool-size: 10
      connection-timeout: 30000 # 30 seconds
      idle-timeout: 300000 # 5 minutes
      # Retire connections before server/network closes them (avoids "connection has been closed" and pool exhaustion)
      max-lifetime: 300000 # 5 minutes - shorter than typical idle timeouts so Hikari recycles first
      leak-detection-threshold: 60000 # 1 minute
      # Connection validation (Hikari validates before use when maxLifetime is set)
      connection-test-query: SELECT 1
      validation-timeout: 5000 # 5 seconds
      # Keep connections alive
      keepalive-time: 120000 # 2 minutes - more frequent keepalive to reduce mid-idle drops
      # Network resilience
      register-mbeans: true
  flyway:
    enabled: false
    locations: classpath:/db/migration # This is the default path Flyway looks in
    # If your database already has existing tables not managed by Flyway before,
    # this will create the Flyway history table without running existing scripts.
    # New scripts will then be applied.
    baseline-on-migrate: true
    baseline-version: 8
    validate-on-migrate: true
#    init-sql: SET search_path TO public;
  jpa:
    hibernate:
      ddl-auto: update
    defer-datasource-initialization: false
    open-in-view: true
    properties:
#      format_sql: true
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        globally_quoted_identifiers: true
        globally_quoted_identifiers_skip_column_definitions: true
        enable_lazy_load_no_trans: true
#    show-sql: true

firebase:
  credentials:
    # Supports environment variable: FIREBASE_CREDENTIALS_PATH
    # Can be: classpath:firebase/serviceAccountKey.json (default)
    # Or: /app/firebase/serviceAccountKey.json (file system path)
    # Or: ${FIREBASE_CREDENTIALS_PATH:classpath:firebase/serviceAccountKey.json}
    path: ${FIREBASE_CREDENTIALS_PATH:classpath:firebase/serviceAccountKey.json}
  project-id: ${FIREBASE_PROJECT_ID:uqar-project-7c843}
  messaging:
    enabled: ${FIREBASE_MESSAGING_ENABLED:true}

notifications:
  purchase:
    financial-limit: 100000


jwtKey: 7402bb3c24c35f15d1a7f1422078d9c1a4d9ebf1a276ff01ac84e6407625532e

# Logging Configuration
#logging:
#  level:
#    # Disable Hibernate SQL logging
#    org.hibernate.SQL: WARN
#    org.hibernate.type.descriptor.sql.BasicBinder: WARN
#    org.hibernate.orm.jdbc.bind: WARN
#    # Keep Hibernate warnings and errors visible
#    org.hibernate: WARN
#    # Optional: Set root logging level (adjust as needed)
#    root: INFO

# Pharmaceutical Import Configuration
pharmaceutical:
  python:
    script:
      path: scripts/
  temp:
    dir: ${java.io.tmpdir}pharmaceutical/
  import:
    timeout:
      minutes: 30
    max-file-size:
      mb: 100